var {inside} = require('../geo.js')

var channels = {
    "100":   "391429452434898955",
    "96":    "392845539521069067",
    "0":     "402621558520020994",
    "2400":  "402621648160686080",
    "rares": "403321331426394112",
    "unown": "403671089571430411",
    "kelsey-park":    "403731422596038656",
    "bec-place-park": "404118604997722112"
}

function filter(pokemon) {
    if (inside(pokemon.point, area)) {
        let output = []
        
        if (pokemon.ivPercent == 100) {output.push("100")} else
        if (pokemon.ivPercent >= 96) {output.push("96")} else
        if (pokemon.ivPercent == 0) {output.push("0")}

        if (pokemon.cp >= 2400) {output.push("2400")}

        if (pokemon.name == "Unown") {output.push("unown")} else
        if (rares.includes(pokemon.name)) {output.push("rares")}

        if (inside(pokemon.point, KelseyPark)   && !parkExclude.includes(pokemon.name)) {output.push("kelsey-park")}    else
        if (inside(pokemon.point, BecPlacePark) && !parkExclude.includes(pokemon.name)) {output.push("bec-place-park")}

        return output
    }
}

const rares = ["Larvitar", "Pupitar", "Tyranitar", "Feebas", "Mareep", "Flaaffy", "Ampharos", "Chansey", "Tangela", "Dratini", "Dragonair", "Dragonite", "Togetic", "Slakoth", "Vigoroth"]
const parkExclude = ["Aipom","Ariados","Azumarill","Bellsprout","Caterpie","Chinchou","Clefairy","Cloyster","Diglett","Doduo","Drowzee","Ekans","Fearow","Furret","Gastly","Goldeen","Gulpin","Hoppip","Horsea","Hypno","Jigglypuff","Jynx","Kakuna","Kingler","Koffing","Krabby","Ledian","Mankey","Meowth","Metapod","Misdreavus","Mr. Mime","Murkrow","Natu","Nidoran♀","Nidoran♂","Oddish","Pidgey","Pidgeotto","Poliwag","Ponyta","Psyduck","Quagsire","Raticate","Rattata","Remoraid","Roselia","Sandshrew","Seaking","Seel","Sentret","Shellder","Skiploom","Skitty","Slowpoke","Sneasel","Spearow","Spheal","Spinarak","Spoink","Starmie","Staryu","Swinub","Tentacool","Venomoth","Venonat","Voltorb","Weedle","Wooper","Wurmple","Xatu","Zigzagoon","Zubat"]

const area = {"type":"Feature","properties":{"name":"area-beckenham","bbox":[-0.111236572265625,51.33618873650609,0.07724761962890625,51.44352269273299]},"geometry":{"type":"Polygon","coordinates":[[[0.05184173583984375,51.367279346773806],[0.05733489990234376,51.40070499944676],[0.07724761962890625,51.42961134244706],[0.01682281494140625,51.44181075517023],[-0.09441375732421875,51.44352269273299],[-0.111236572265625,51.38849461063877],[-0.10540008544921875,51.35162946966703],[-0.01373291015625,51.33618873650609],[0.0418853759765625,51.33962046011348],[0.05184173583984375,51.367279346773806]]]}}
const KelseyPark = {"type":"Feature","properties":{"name":"kelsey-park","bbox":[-0.025663375854492188,51.397224299666085,-0.01819610595703125,51.40635387911026]},"geometry":{"type":"Polygon","coordinates":[[[-0.02471923828125,51.40635387911026],[-0.0254058837890625,51.40579169960402],[-0.025663375854492188,51.40517597126241],[-0.025320053100585934,51.404225591679065],[-0.025126934051513672,51.40311455952028],[-0.024890899658203125,51.401749157731544],[-0.024290084838867184,51.400249846067595],[-0.023345947265625,51.39789368557917],[-0.02300262451171875,51.397224299666085],[-0.0212860107421875,51.39749205520681],[-0.020599365234375,51.399339525721075],[-0.018281936645507812,51.39982146227906],[-0.01819610595703125,51.401079828240405],[-0.01922607421875,51.40105305485701],[-0.019397735595703125,51.40166883870982],[-0.020728111267089844,51.40165545219247],[-0.02132892608642578,51.40319487600309],[-0.02229452133178711,51.403864174541276],[-0.02368927001953125,51.40469409112512],[-0.023860931396484375,51.40541690942689],[-0.023946762084960938,51.40592555249428],[-0.02471923828125,51.40635387911026]]]}}
const BecPlacePark = {"type":"Feature","properties":{"name":"bec-place-park","bbox":[-0.022745132446289062,51.4136883497752,-0.0052356719970703125,51.42399209613635]},"geometry":{"type":"Polygon","coordinates":[[[-0.005407333374023437,51.42286816395111],[-0.01373291015625,51.42340337320095],[-0.01446247100830078,51.42399209613635],[-0.020170211791992188,51.421423067668066],[-0.021715164184570312,51.4204328827233],[-0.021200180053710938,51.420031450282984],[-0.021543502807617184,51.41890742069287],[-0.021715164184570312,51.418318632256614],[-0.022745132446289062,51.41751572671151],[-0.02197265625,51.417301616184226],[-0.022401809692382812,51.416766335478286],[-0.02094268798828125,51.41590987331082],[-0.01823902130126953,51.41574928486798],[-0.018110275268554688,51.41505339509656],[-0.014505386352539062,51.414999864675345],[-0.014677047729492188,51.41376864768711],[-0.009012222290039062,51.4136883497752],[-0.008497238159179686,51.414250432196795],[-0.007638931274414063,51.41441102590505],[-0.0066089630126953125,51.414625149971805],[-0.0062656402587890625,51.41505339509656],[-0.0055789947509765625,51.41762278159904],[-0.0052356719970703125,51.42235970935806],[-0.005407333374023437,51.42286816395111]]]}}

module.exports.channels = channels
module.exports.filter = filter